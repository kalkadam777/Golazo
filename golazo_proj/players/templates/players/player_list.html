{% extends 'base.html' %}

{% block title %}Players List{% endblock %}

{% block content %}
<h1>Players</h1>

<form method="GET" action="" class="filter-form">
    <input type="text" name="q" class="search-box" placeholder="Search players..." value="{{ request.GET.q }}">

    <label for="position">Position:</label>
    <select name="position" class="filter-dropdown">
        <option value="All">All Positions</option>
        {% for code, name in positions %}
            <option value="{{ code }}" {% if request.GET.position == code %}selected{% endif %}>{{ name }}</option>
        {% endfor %}
    </select>

    <label for="min_value">Min Value (€):</label>
    <input type="range" id="min_value" name="min_value" min="0" max="100000000" step="100000" value="{{ min_value }}">
    <span id="min_value_output">{{ min_value }} €</span>

    <label for="max_value">Max Value (€):</label>
    <input type="range" id="max_value" name="max_value" min="0" max="100000000" step="100000" value="{{ max_value }}">
    <span id="max_value_output">{{ max_value }} €</span>

    <button type="submit" class="btn">Filter</button>
</form>

<div class="players-list">
    <ul>
        {% for player in players %}
            <li class="player-item">
                <a href="{% url 'player-detail' player.pk %}">{{ player.name }}</a>
                <span>{{ player.position }}</span>
                <span>{{ player.value }} €</span>
            </li>
        {% empty %}
            <li class="no-players">No players available.</li>
        {% endfor %}
    </ul>
</div>

{% if is_paginated %}
    <nav class="pagination">
        <ul>
            {% if page_obj.has_previous %}
                <li><a href="?page=1">&laquo; First</a></li>
                <li><a href="?page={{ page_obj.previous_page_number }}">Previous</a></li>
            {% endif %}

            <li class="active">Page {{ page_obj.number }} of {{ paginator.num_pages }}</li>

            {% if page_obj.has_next %}
                <li><a href="?page={{ page_obj.next_page_number }}">Next</a></li>
                <li><a href="?page={{ paginator.num_pages }}">Last &raquo;</a></li>
            {% endif %}
        </ul>
    </nav>
{% endif %}
{% endblock %}